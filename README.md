# terraform-aws-kinesis-firehose

Terraform module for AWS Kinesis Firehose delivery streams

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.0 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 5.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | 6.14.1 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_cloudwatch_log_group.this_force_destroy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_group) | resource |
| [aws_cloudwatch_log_group.this_protected](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_group) | resource |
| [aws_iam_role.firehose_cloudwatch_logs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy.firehose_cloudwatch_logs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_kinesis_firehose_delivery_stream.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kinesis_firehose_delivery_stream) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_cloudwatch_log_group_force_destroy"></a> [cloudwatch\_log\_group\_force\_destroy](#input\_cloudwatch\_log\_group\_force\_destroy) | Whether to force destroy the CloudWatch log group. Only used when create\_cloudwatch\_log\_group is true. | `bool` | `false` | no |
| <a name="input_cloudwatch_log_group_name"></a> [cloudwatch\_log\_group\_name](#input\_cloudwatch\_log\_group\_name) | Name for the CloudWatch log group. Only used when create\_cloudwatch\_log\_group is true. If not provided, defaults to /aws/kinesisfirehose/{name}. | `string` | `null` | no |
| <a name="input_cloudwatch_log_group_retention_days"></a> [cloudwatch\_log\_group\_retention\_days](#input\_cloudwatch\_log\_group\_retention\_days) | Number of days to retain CloudWatch logs. Only used when create\_cloudwatch\_log\_group is true. | `number` | `14` | no |
| <a name="input_cloudwatch_log_stream_name"></a> [cloudwatch\_log\_stream\_name](#input\_cloudwatch\_log\_stream\_name) | Name for the CloudWatch log stream. Only used when create\_cloudwatch\_log\_group is true. If not provided, defaults to {name}. | `string` | `null` | no |
| <a name="input_create_cloudwatch_log_group"></a> [create\_cloudwatch\_log\_group](#input\_create\_cloudwatch\_log\_group) | Whether to create a CloudWatch log group for the delivery stream. When true, cloudwatch\_logging\_options in s3\_configuration will be automatically configured. | `bool` | `false` | no |
| <a name="input_destination"></a> [destination](#input\_destination) | The destination for the delivery stream. Valid values are `extended_s3`, `redshift`, `elasticsearch`, `splunk`, and `http_endpoint`. | `string` | n/a | yes |
| <a name="input_elasticsearch_configuration"></a> [elasticsearch\_configuration](#input\_elasticsearch\_configuration) | Configuration for Elasticsearch destination. | <pre>object({<br/>    domain_arn     = string<br/>    role_arn       = string<br/>    index_name     = string<br/>    type_name      = optional(string)<br/>    s3_backup_mode = optional(string, "FailedEventsOnly")<br/>    retry_duration = optional(number, 300)<br/><br/>    s3_configuration = object({<br/>      role_arn            = string<br/>      bucket_arn          = string<br/>      prefix              = optional(string)<br/>      error_output_prefix = optional(string)<br/>      buffer_interval     = optional(number, 60)<br/>      buffer_size         = optional(number, 5)<br/>      compression_format  = optional(string, "UNCOMPRESSED")<br/>    })<br/><br/>    cloudwatch_logging_options = optional(object({<br/>      enabled         = bool<br/>      log_group_name  = string<br/>      log_stream_name = string<br/>    }))<br/><br/>    processing_configuration = optional(object({<br/>      enabled = bool<br/>      processors = list(object({<br/>        type = string<br/>        parameters = list(object({<br/>          parameter_name  = string<br/>          parameter_value = string<br/>        }))<br/>      }))<br/>    }))<br/><br/>    vpc_configuration = optional(object({<br/>      subnet_ids         = list(string)<br/>      security_group_ids = list(string)<br/>      role_arn           = string<br/>    }))<br/>  })</pre> | `null` | no |
| <a name="input_http_endpoint_configuration"></a> [http\_endpoint\_configuration](#input\_http\_endpoint\_configuration) | Configuration for HTTP endpoint destination. | <pre>object({<br/>    url            = string<br/>    name           = string<br/>    access_key     = optional(string)<br/>    secret_key     = optional(string)<br/>    role_arn       = string<br/>    s3_backup_mode = optional(string, "FailedEventsOnly")<br/>    retry_duration = optional(number, 3600)<br/><br/>    s3_configuration = object({<br/>      role_arn            = string<br/>      bucket_arn          = string<br/>      prefix              = optional(string)<br/>      error_output_prefix = optional(string)<br/>      buffer_interval     = optional(number, 60)<br/>      buffer_size         = optional(number, 5)<br/>      compression_format  = optional(string, "UNCOMPRESSED")<br/>    })<br/><br/>    cloudwatch_logging_options = optional(object({<br/>      enabled         = bool<br/>      log_group_name  = string<br/>      log_stream_name = string<br/>    }))<br/><br/>    processing_configuration = optional(object({<br/>      enabled = bool<br/>      processors = list(object({<br/>        type = string<br/>        parameters = list(object({<br/>          parameter_name  = string<br/>          parameter_value = string<br/>        }))<br/>      }))<br/>    }))<br/><br/>    request_configuration = optional(object({<br/>      content_encoding = optional(string, "GZIP")<br/>      common_attributes = optional(list(object({<br/>        name  = string<br/>        value = string<br/>      })), [])<br/>    }))<br/>  })</pre> | `null` | no |
| <a name="input_kinesis_source_configuration"></a> [kinesis\_source\_configuration](#input\_kinesis\_source\_configuration) | Configuration for Kinesis source. Required when destination is not `extended_s3`. | <pre>object({<br/>    kinesis_stream_arn = string<br/>    role_arn           = string<br/>  })</pre> | `null` | no |
| <a name="input_name"></a> [name](#input\_name) | A name to identify the stream. This is unique to the AWS account and region the stream is created in. For WAF logging, must start with 'aws-waf-logs-' prefix. | `string` | n/a | yes |
| <a name="input_redshift_configuration"></a> [redshift\_configuration](#input\_redshift\_configuration) | Configuration for Redshift destination. | <pre>object({<br/>    role_arn           = string<br/>    cluster_jdbcurl    = string<br/>    username           = string<br/>    password           = string<br/>    retry_duration     = optional(number, 3600)<br/>    copy_options       = optional(string)<br/>    data_table_name    = string<br/>    data_table_columns = optional(string)<br/>    s3_backup_mode     = optional(string, "Disabled")<br/><br/>    s3_configuration = object({<br/>      role_arn            = string<br/>      bucket_arn          = string<br/>      prefix              = optional(string)<br/>      error_output_prefix = optional(string)<br/>      buffer_interval     = optional(number, 60)<br/>      buffer_size         = optional(number, 5)<br/>      compression_format  = optional(string, "UNCOMPRESSED")<br/>    })<br/><br/>    cloudwatch_logging_options = optional(object({<br/>      enabled         = bool<br/>      log_group_name  = string<br/>      log_stream_name = string<br/>    }))<br/><br/>    processing_configuration = optional(object({<br/>      enabled = bool<br/>      processors = list(object({<br/>        type = string<br/>        parameters = list(object({<br/>          parameter_name  = string<br/>          parameter_value = string<br/>        }))<br/>      }))<br/>    }))<br/>  })</pre> | `null` | no |
| <a name="input_s3_configuration"></a> [s3\_configuration](#input\_s3\_configuration) | Configuration for S3 destination. Required when destination is `extended_s3`. | <pre>object({<br/>    role_arn            = string<br/>    bucket_arn          = string<br/>    prefix              = optional(string)<br/>    error_output_prefix = optional(string)<br/>    buffer_interval     = optional(number, 60)<br/>    buffer_size         = optional(number, 5)<br/>    compression_format  = optional(string, "UNCOMPRESSED")<br/><br/>    server_side_encryption = optional(object({<br/>      enabled    = optional(bool, false)<br/>      kms_key_id = optional(string)<br/>    }))<br/><br/>    cloudwatch_logging_options = optional(object({<br/>      enabled         = bool<br/>      log_group_name  = string<br/>      log_stream_name = string<br/>    }))<br/><br/>    s3_backup_configuration = optional(object({<br/>      role_arn            = string<br/>      bucket_arn          = string<br/>      prefix              = optional(string)<br/>      error_output_prefix = optional(string)<br/>      buffer_interval     = optional(number, 60)<br/>      buffer_size         = optional(number, 5)<br/>      compression_format  = optional(string, "UNCOMPRESSED")<br/><br/>      cloudwatch_logging_options = optional(object({<br/>        enabled         = bool<br/>        log_group_name  = string<br/>        log_stream_name = string<br/>      }))<br/>    }))<br/><br/>    processing_configuration = optional(object({<br/>      enabled = bool<br/>      processors = list(object({<br/>        type = string<br/>        parameters = list(object({<br/>          parameter_name  = string<br/>          parameter_value = string<br/>        }))<br/>      }))<br/>    }))<br/><br/>    data_format_conversion_configuration = optional(object({<br/>      enabled = bool<br/><br/>      input_format_configuration = optional(object({<br/>        deserializer = object({<br/>          hive_json_ser_de = optional(object({<br/>            timestamp_formats = optional(list(string))<br/>          }))<br/>          open_x_json_ser_de = optional(object({<br/>            case_insensitive                         = optional(bool)<br/>            column_to_json_key_mappings              = optional(map(string))<br/>            convert_dots_in_json_keys_to_underscores = optional(bool)<br/>          }))<br/>        })<br/>      }))<br/><br/>      output_format_configuration = optional(object({<br/>        orc_ser_de = optional(object({<br/>          block_size_bytes                        = optional(number)<br/>          bloom_filter_columns                    = optional(list(string))<br/>          bloom_filter_false_positive_probability = optional(number)<br/>          compression                             = optional(string)<br/>          dictionary_key_threshold                = optional(number)<br/>          enable_padding                          = optional(bool)<br/>          format_version                          = optional(string)<br/>          padding_tolerance                       = optional(number)<br/>          row_index_stride                        = optional(number)<br/>          stripe_size_bytes                       = optional(number)<br/>        }))<br/>        parquet_ser_de = optional(object({<br/>          block_size_bytes              = optional(number)<br/>          compression                   = optional(string)<br/>          enable_dictionary_compression = optional(bool)<br/>          max_padding_bytes             = optional(number)<br/>          page_size_bytes               = optional(number)<br/>          writer_version                = optional(string)<br/>        }))<br/>      }))<br/><br/>      schema_configuration = optional(object({<br/>        catalog_id    = optional(string)<br/>        database_name = string<br/>        region        = optional(string)<br/>        role_arn      = string<br/>        table_name    = string<br/>        version_id    = optional(string)<br/>      }))<br/>    }))<br/>  })</pre> | `null` | no |
| <a name="input_splunk_configuration"></a> [splunk\_configuration](#input\_splunk\_configuration) | Configuration for Splunk destination. | <pre>object({<br/>    hec_endpoint               = string<br/>    hec_token                  = string<br/>    hec_acknowledgment_timeout = optional(number, 600)<br/>    hec_endpoint_type          = optional(string, "Event")<br/>    s3_backup_mode             = optional(string, "FailedEventsOnly")<br/>    retry_duration             = optional(number, 3600)<br/><br/>    s3_configuration = object({<br/>      role_arn            = string<br/>      bucket_arn          = string<br/>      prefix              = optional(string)<br/>      error_output_prefix = optional(string)<br/>      buffer_interval     = optional(number, 60)<br/>      buffer_size         = optional(number, 5)<br/>      compression_format  = optional(string, "UNCOMPRESSED")<br/>    })<br/><br/>    cloudwatch_logging_options = optional(object({<br/>      enabled         = bool<br/>      log_group_name  = string<br/>      log_stream_name = string<br/>    }))<br/><br/>    processing_configuration = optional(object({<br/>      enabled = bool<br/>      processors = list(object({<br/>        type = string<br/>        parameters = list(object({<br/>          parameter_name  = string<br/>          parameter_value = string<br/>        }))<br/>      }))<br/>    }))<br/>  })</pre> | `null` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of tags to assign to the resource. | `map(string)` | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_cloudwatch_log_group_arn"></a> [cloudwatch\_log\_group\_arn](#output\_cloudwatch\_log\_group\_arn) | The ARN of the CloudWatch log group (only created when create\_cloudwatch\_log\_group is true) |
| <a name="output_cloudwatch_log_group_name"></a> [cloudwatch\_log\_group\_name](#output\_cloudwatch\_log\_group\_name) | The name of the CloudWatch log group (only created when create\_cloudwatch\_log\_group is true) |
| <a name="output_cloudwatch_logs_role_arn"></a> [cloudwatch\_logs\_role\_arn](#output\_cloudwatch\_logs\_role\_arn) | The ARN of the IAM role for CloudWatch logs (only created when create\_cloudwatch\_log\_group is true) |
| <a name="output_delivery_stream_arn"></a> [delivery\_stream\_arn](#output\_delivery\_stream\_arn) | The ARN of the Kinesis Firehose delivery stream |
| <a name="output_delivery_stream_destination"></a> [delivery\_stream\_destination](#output\_delivery\_stream\_destination) | The destination of the Kinesis Firehose delivery stream |
| <a name="output_delivery_stream_name"></a> [delivery\_stream\_name](#output\_delivery\_stream\_name) | The name of the Kinesis Firehose delivery stream |
| <a name="output_delivery_stream_tags_all"></a> [delivery\_stream\_tags\_all](#output\_delivery\_stream\_tags\_all) | A map of tags assigned to the resource, including those inherited from the provider default\_tags configuration block |
| <a name="output_delivery_stream_version_id"></a> [delivery\_stream\_version\_id](#output\_delivery\_stream\_version\_id) | The version ID of the Kinesis Firehose delivery stream |
<!-- END_TF_DOCS -->
